### TCP

TCP 헤더

SYN : 송신측과 수신측에서 시퀀스 번호를 공유함을 나타냄

ACK : 수신 데이터의 시퀀스 번호가 유효함

FIN : 연결 끊기를 나타냄

시퀀스 번호 : 현재 데이터의 첫 번째 위치가 전체 송신 데이터에 몇 번째 인지를 나타내는 일련번호

ACK 번호 : 수신측에 몇 바이트까지 받았는지 송신측으로 보내는 일련번호

### TCP 동작 과정

### 소켓 생성

![image](https://user-images.githubusercontent.com/70627982/208930561-2edca37a-15e9-4100-8aee-ac6e30f3e3a8.png)


디스크립터 = 소켓의 번호표

### 3 way handshake

![image](https://user-images.githubusercontent.com/70627982/208930620-18a4215c-c7cd-4560-8351-b9ad13852ca1.png)


1. 클라이언트에서 생성한 시퀀스 번호 공유 (클라이언트 → 서버)
2. 서버에서 생성한 시퀀스 번호 공유 (서버 → 클라이언트)
3. 서버에서 시퀀스 번호 잘 받았다고 ACK (클라이언트 → 서버)

### 데이터 송신, 수신

1. 클라이언트에서 write함수를 호출하고 브라우저에서 받은 http request 메세지를 받아서 패킷으로 서버에 전달
2.  서버는 데이터를 만들어서 클라이언트에 전달
- 패킷이 손실되어 응답이 오지 않으면 다시 재전송

### 4 hand shake

- 연결끊기
1. 클라이언트가 close 호출해서 컨트롤 비트 FIN을 서버에 전달 (클라이언트 → 서버)
2. 서버는 FIN의 응답으로 ACK를 전달 (서버 → 클라이언트)
3. 서버가 close 호출해서 컨트롤 비트 FIN을 서버에 전달 (서버 → 클라이언트)
4. 클라이언트에서 ACK로 응답 (클라이언트 → 서버)

### UDP

![image](https://user-images.githubusercontent.com/70627982/208930665-0794d5fe-a345-4e8a-85aa-7d223a424699.png)


1. 클라이언트에서 send to 호출 후 데이터 전송 (클라이언트 → 서버)
2. 클라이언트에서 send to 호출 후 데이터 전송 (서버 → 클라이언트) 
- 패킷이 소실되더라도 데이터 바로 전송

## TCP vs UDP

|  | TCP | UDP |
| --- | --- | --- |
| 신뢰성 | 높음 | 낮음 |
| 전송속도 | 느림 | 빠름 |
| 사용되는 곳 | HTTP 2.0 이하의 버전에서 대부분 사용 | DNS, 동영상, 데이터 |
